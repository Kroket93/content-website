<div class="blog-post-container">
  <app-loading-spinner *ngIf="isLoading" message="Loading post..."></app-loading-spinner>

  <div *ngIf="!isLoading && errorMessage" class="error-message">
    <div class="error-icon">!</div>
    <p>{{ errorMessage }}</p>
    <button (click)="goBack()" class="back-button">Back to Blog</button>
  </div>

  <article *ngIf="!isLoading && !errorMessage && post" class="post-article">
    <button (click)="goBack()" class="back-link">
      &larr; Back to Blog
    </button>

    <header class="post-header">
      <h1>{{ post.title }}</h1>

      <div class="post-meta">
        <span *ngIf="post.author" class="author">By {{ post.author }}</span>
        <span *ngIf="post.publishedAt" class="date">
          Published on {{ post.publishedAt | date:'longDate' }}
        </span>
      </div>

      <div *ngIf="post.tags && post.tags.length > 0" class="post-tags">
        <span *ngFor="let tag of post.tags" class="tag">{{ tag }}</span>
      </div>
    </header>

    <div *ngIf="post.featuredImage" class="featured-image">
      <img [src]="post.featuredImage" [alt]="post.title" />
    </div>

    <div class="post-body" [innerHTML]="sanitizedContent"></div>

    <footer class="post-footer">
      <div class="share-section">
        <span class="share-label">Share this post:</span>
        <div class="share-buttons">
          <button (click)="shareOnTwitter()" class="share-btn twitter" aria-label="Share on Twitter">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
          </button>
          <button (click)="shareOnLinkedIn()" class="share-btn linkedin" aria-label="Share on LinkedIn">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
          </button>
          <button (click)="shareOnFacebook()" class="share-btn facebook" aria-label="Share on Facebook">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
          </button>
          <button (click)="copyLink()" class="share-btn copy" aria-label="Copy link">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M13.723 18.654l-3.61 3.609c-2.316 2.315-6.063 2.315-8.378 0-1.12-1.118-1.735-2.606-1.735-4.188 0-1.582.615-3.07 1.734-4.189l4.866-4.865c2.355-2.355 6.114-2.262 8.377 0 .453.453.81.973 1.089 1.527l-1.593 1.592c-.18-.613-.5-1.189-.964-1.652-1.448-1.448-3.93-1.51-5.439-.001l-.001.002-4.867 4.865c-1.5 1.499-1.5 3.941 0 5.44 1.517 1.517 3.958 1.5 5.44 0l2.971-2.971c.731.234 1.503.345 2.28.336l-3.61 3.609c-.005.005-.01.009-.015.014zm6.054-10.306c2.316-2.316 2.316-6.063 0-8.379-2.316-2.315-6.063-2.315-8.379 0l-3.609 3.61c-.005.005-.01.01-.014.015l3.609 3.609c-.009-.777.102-1.549.336-2.28l2.971-2.971c1.499-1.499 3.941-1.499 5.44 0 1.499 1.499 1.499 3.941 0 5.44l-.001.001-4.866 4.865c-.001.001-.002.002-.003.003-1.509 1.509-3.991 1.447-5.439-.001-.464-.464-.784-1.039-.964-1.652l-1.593 1.592c.279.554.636 1.074 1.089 1.527 2.315 2.315 6.063 2.315 8.378 0l4.866-4.866.003-.002z"/>
            </svg>
          </button>
        </div>
      </div>

      <button (click)="goBack()" class="back-button">
        &larr; Back to All Posts
      </button>
    </footer>
  </article>
</div>
